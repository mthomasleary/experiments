
var Attack = function(prof, abilityMod, atkMod, dmgMod, die){
    this.prof = prof || 1;
    this.abilityMod = abilityMod || 0;
    this.atkMod = atkMod || 0;
    this.dmgMod = dmgMod || 0;
    this.die = die || 1;
    
    this.expectedDamage =  function (ac){
        var attck = this.prof + this.abilityMod + this.atkMod;          
        
        // rolls
        var fumble = 1;
        var minMiss = 2;
        var minHit = ac - attack;
        var maxMiss = minHit - 1;
        var maxHit = 19;
        var crit = 20;
        
        var chance = {
            fumble: 5,
            miss: (5/100) * (maxMiss - minMiss + 1),
            hit: (5/100) * (maxHit - minHit + 1),
            crit: 5
        }
        
        var damage={
            fumble: chance['fumble'] * 0, 
            miss:   chance['miss'] * 0,
            hit:    chance['hit'] * ((die / 2) + dmgMod),
            crit:   chance['crit']* (die + dmgMod)
        }
        
        return damage['fumble'] + damage['miss'] + damage['hit'] + damage['crit'];
    };
}

var lightBringer = new Attack(3, 4, 1, 1, 8);

console.log(lightBringer.expectedDamage());

